{"ast":null,"code":"import React,{useState,useEffect}from'react';import{connect}from'react-redux';import{useNavigate}from'react-router-dom';import{createProject}from'../actions/auth';import'./css/create_project.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Project=_ref=>{let{isAuthenticated,user,createProject,project}=_ref;const[showForm,setShowForm]=useState(false);const[projectName,setProjectName]=useState('');const[projectId,setProjectId]=useState('');const navigate=useNavigate();const generateProjectId=name=>{let code;if(!name.includes(' ')){code=name.slice(0,4).toUpperCase();}else{const words=name.split(/\\s+/);code=(words[0].slice(0,3)+words[words.length-1].slice(0,3)).toUpperCase();}if(!/^[A-Za-z]+$/.test(code)){const letters='ABCDEFGHIJKLMNOPQRSTUVWXYZ';code=Array.from({length:4},()=>letters.charAt(Math.floor(Math.random()*letters.length))).join('');}return code;};const handleProjectNameChange=e=>{const newName=e.target.value;setProjectName(newName);const newProjectId=generateProjectId(newName);setProjectId(newProjectId);};const handleSubmit=async e=>{e.preventDefault();try{await createProject({projectname:projectName,projectid:projectId,teamlead:user.email});setProjectName('');setProjectId('');setShowForm(false);}catch(error){console.error('Error creating project:',error);}};useEffect(()=>{if(project&&project.projectid){navigate(\"/project/\".concat(project.projectid));}},[project,navigate]);return/*#__PURE__*/_jsxs(\"span\",{className:\"create-project\",children:[!showForm&&/*#__PURE__*/_jsx(\"button\",{className:\"create-project-button\",onClick:()=>setShowForm(true),children:\"Create Project\"}),showForm&&/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close\",onClick:()=>setShowForm(false),children:\"\\xD7\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"project-form\",children:[/*#__PURE__*/_jsx(\"h3\",{htmlFor:\"projectName\",children:\"Create a Scrum project\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"projectName\",value:projectName,onChange:handleProjectNameChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"projectId\",value:projectId,readOnly:true,disabled:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Create Project\"})]})]})})]});};const mapStateToProps=state=>({isAuthenticated:state.auth.isAuthenticated,user:state.auth.user,project:state.auth.project});export default connect(mapStateToProps,{createProject})(Project);","map":{"version":3,"names":["React","useState","useEffect","connect","useNavigate","createProject","jsx","_jsx","jsxs","_jsxs","Project","_ref","isAuthenticated","user","project","showForm","setShowForm","projectName","setProjectName","projectId","setProjectId","navigate","generateProjectId","name","code","includes","slice","toUpperCase","words","split","length","test","letters","Array","from","charAt","Math","floor","random","join","handleProjectNameChange","e","newName","target","value","newProjectId","handleSubmit","preventDefault","projectname","projectid","teamlead","email","error","console","concat","className","children","onClick","onSubmit","htmlFor","type","id","onChange","required","readOnly","disabled","mapStateToProps","state","auth"],"sources":["C:/Users/Hp/Documents/firststage2copy/Project-Management-Tool/frontend/src/containers/Create_project.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { createProject } from '../actions/auth';\r\nimport './css/create_project.css';\r\n\r\nconst Project = ({ isAuthenticated, user, createProject, project }) => {\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [projectName, setProjectName] = useState('');\r\n    const [projectId, setProjectId] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    const generateProjectId = (name) => {\r\n        let code;\r\n        if (!name.includes(' ')) {\r\n            code = name.slice(0, 4).toUpperCase();\r\n        } else {\r\n            const words = name.split(/\\s+/);\r\n            code = (words[0].slice(0, 3) + words[words.length - 1].slice(0, 3)).toUpperCase();\r\n        }\r\n\r\n        if (!/^[A-Za-z]+$/.test(code)) {\r\n            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n            code = Array.from({ length: 4 }, () => letters.charAt(Math.floor(Math.random() * letters.length))).join('');\r\n        }\r\n\r\n        return code;\r\n    };\r\n\r\n    const handleProjectNameChange = (e) => {\r\n        const newName = e.target.value;\r\n        setProjectName(newName);\r\n        const newProjectId = generateProjectId(newName);\r\n        setProjectId(newProjectId);\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            await createProject({ projectname: projectName, projectid: projectId, teamlead: user.email });\r\n            setProjectName('');\r\n            setProjectId('');\r\n            setShowForm(false);\r\n        } catch (error) {\r\n            console.error('Error creating project:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (project && project.projectid) {\r\n            navigate(`/project/${project.projectid}`);\r\n        }\r\n    }, [project, navigate]);\r\n\r\n    return (\r\n        <span className='create-project'>\r\n           \r\n            {!showForm && (\r\n                <button className=\"create-project-button\" onClick={() => setShowForm(true)}>Create Project</button>\r\n            )}\r\n            {showForm && (\r\n                <div className=\"modal\">\r\n                    <div className=\"modal-content\">\r\n                        <span className=\"close\" onClick={() => setShowForm(false)}>&times;</span>\r\n                        <form onSubmit={handleSubmit} className=\"project-form\">\r\n                            <h3 htmlFor=\"projectName\">Create a Scrum project</h3>\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"projectName\"\r\n                                value={projectName}\r\n                                onChange={handleProjectNameChange}\r\n                                required\r\n                            />\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"projectId\"\r\n                                value={projectId}\r\n                                readOnly\r\n                                disabled\r\n                            />\r\n                            <button type=\"submit\">Create Project</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </span>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    isAuthenticated: state.auth.isAuthenticated,\r\n    user: state.auth.user,\r\n    project: state.auth.project\r\n});\r\n\r\nexport default connect(mapStateToProps, { createProject })(Project);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}